<ng-container *ngIf="disabled else formArea">
    <div class="text-center m-0 d-flex flex-column justify-content-center">
        <mat-progress-spinner mode="indeterminate" class="align-self-center">
        </mat-progress-spinner>
    </div>
</ng-container>
<ng-template #formArea>
    <small class="text-muted">Connect to your aquarium monitoring device. Currently only supported by Raspberry
        Pis.</small>
    <ng-container *ngIf="!device else hasDevice">
        <div>
            <button class="btn btn-success" (click)="clickConnectDevice()">Connect Device</button>
        </div>
    </ng-container>
    <ng-template #hasDevice>
        <ng-container *ngIf="editing else notEditing">
            <form #form *ngIf="editing">
                <div class="row m-2">
                    <mat-form-field class="m-2 example-full-width">
                        <input type="text" placeholder="Device Name" aria-label="Number" matInput
                            [(ngModel)]="device.name" name="name">
                    </mat-form-field>
                </div>
                <div class="row m-2">
                    <mat-form-field>
                        <mat-label>Type</mat-label>
                        <mat-select [(ngModel)]="device.type" name="type">
                            <mat-option value=1>
                                Raspberry Pi
                            </mat-option>
                            <mat-option value=0>
                                Other
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="row m-2">
                    <mat-form-field class="m-2 example-full-width">
                        <input type="text" placeholder="Address (0.0.0.0)" aria-label="Number" matInput
                            [(ngModel)]="device.address" name="address">
                    </mat-form-field>
                    <mat-form-field class="m-2 example-full-width">
                        <input type="text" placeholder="Port" aria-label="Number" matInput [(ngModel)]="device.port"
                            name="port">
                    </mat-form-field>
                </div>
                <div class="row m-2">
                    <mat-form-field class="m-2 w-100">
                        <input type="text" placeholder="Private Key (Config. Property)" aria-label="Number" matInput
                            [(ngModel)]="device.privateKey" name="privateKey">
                    </mat-form-field>
                </div>
                <mat-error *ngIf="error">All fields are required.</mat-error>
                <button type="submit" class="m-2 btn btn-danger" *ngIf="device.id" (click)='clickDeleteDevice()'>Delete
                    Device</button>
                <div class="float-md-right">

                    <button type="submit" class="m-2 btn btn-danger" (click)='clickCancelEditing()'>Cancel</button>
                    <button type="submit" class="m-2 btn btn-primary" *ngIf="device.id"
                        (click)="clickUpdateDevice()">Update
                        Device</button>
                    <button type="submit" class="m-2 btn btn-success" *ngIf="!device.id"
                        (click)="clickCreateDevice()">Add
                        Device</button>
                </div>
            </form>
        </ng-container>
        <ng-template #notEditing>
            <div class="row m-2">
                <fa-icon class="mr-2" [icon]="faDevice"></fa-icon>
                
                <div class="row">
                    <div class="col-4">
                        <h5>{{device.name}}</h5>
                    </div>
                    <div class="col-4">

                        <button class="btn btn-secondary" (click)="clickEditDevice()">Manage...</button>
                    </div>
                </div>
            </div>
        </ng-template>
    </ng-template>
</ng-template>
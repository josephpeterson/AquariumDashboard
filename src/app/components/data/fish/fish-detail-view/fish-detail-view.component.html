<div class="shadow mb-5 bg-white rounded fish-detail-component" *ngIf="fish else loading">
    <div class="row banner">
        <div class="float-left">
            <div class="thumbnail"></div>
        </div>
        <div class="col p-0">
            <h1>{{fish.name}} <button class="btn btn-secondary edit float-right" (click)="clickEdit()">
                    <fa-icon class="pr-1" [icon]="faEdit"></fa-icon>Edit Fish
                </button></h1>
            <div class="navigation">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Overview</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Feeding</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Photos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="#">Notes</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="p-4" *ngIf="!editing">
        <div class="row">
            <div class="col">
                <h4>General</h4>
                <ul class="list-group">
                    <li class="list-group-item">Age: {{getFishAge()}} days</li>
                    <li class="list-group-item">Species: <a
                            [routerLink]='["/species",fish.speciesId]'>{{fish.species.name}}</a>
                    </li>
                    <li class="list-group-item">Aquarium: Aquarium name here</li>
                </ul>
            </div>
            <div class="col">
                <h4>Species</h4>
                <species-card [species]="fish.species"></species-card>
            </div>
        </div>
        <div class="row pt-5">
            <div class="col">
                <h4>Last Feeding</h4>
                <div class="nofeeding">
                    <p>This fish has never been fed!</p>
                    <button class='btn btn-secondary'>Feed</button>
                </div>
            </div>
            <div class="col">
                <h4>Health</h4>
            </div>
        </div>
        <div class="row p-3">
            <h4>Recent Photos</h4>
        </div>
        <div class="row p-3">
            <h4>Tasks</h4>
            <div class="empty-card">
                <p>No tasks need to be completed for this fish</p>
            </div>
        </div>
        <feeding-table-list class="w-100 p-2" *ngIf="fish.feedings && fish.feedings.length" [fish]="fish">
        </feeding-table-list>
    </div>
    <ng-container *ngIf="editing">
        <mat-form-field class="m-2">
            <input [disabled]='updating$ | async' type="text" placeholder="Fish Name" matInput [(ngModel)]="fish.name">
        </mat-form-field>
        <species-select class="m-2" [value]='fish.speciesId' [fish]="fish"></species-select>
        <div class="row m-2">
            <mat-form-field>
                <mat-label>Gender</mat-label>

                <mat-select [(ngModel)]="fish.gender">
                    <mat-option value=1>
                        Male
                    </mat-option>
                    <mat-option value=2>
                        Female
                    </mat-option>
                    <mat-option value=0>
                        Unknown
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="row m-2">
            <mat-form-field class="w-100">
                <textarea matInput [(ngModel)]="fish.description"
                    placeholder="Fish description, notes, attributes, features, etc..."></textarea>
            </mat-form-field>
        </div>

        <div class="row m-2">

            <button *ngIf="!adding" [disabled]='updating$ | async' (click)="clickDelete()" class="m-2 btn btn-danger">
                <fa-icon class="pr-1" [icon]="faTrash"></fa-icon>Delete
            </button>
            <button *ngIf="!adding" [disabled]='updating$ | async' (click)="clickReset()"
                class="m-2 btn btn-info">Reset</button>
            <button *ngIf="!adding" [disabled]='updating$ | async' (click)="clickCancel()"
                class="m-2 btn btn-danger">Cancel</button>
            <button [disabled]='(updating$ | async) || (adding$ | async)' (click)="adding ? clickAdd():clickSave()"
                class="m-2 btn btn-success">Save Changes</button>

        </div>
    </ng-container>
</div>
<ng-template #loading>
    <div class="shadow p-3 mb-5 bg-white rounded d-flex flex-row text-center">
        <table style="width:100%;height:100%;">
            <tr>
                <td>
                    <mat-progress-spinner class="mr-auto ml-auto align-middle" color="warn" mode="indeterminate">
                    </mat-progress-spinner>

                </td>
            </tr>
        </table>
    </div>
</ng-template>